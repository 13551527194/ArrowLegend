{
  "code": "import GameShaderObj from \"../GameShaderObj\";\r\nimport CustomMaterial from \"../CustomMaterial\";\r\nexport default class MonsterShader extends GameShaderObj {\r\n    constructor(sp) {\r\n        super();\r\n        this.spArr = [];\r\n        this.cpArr = [];\r\n        this.sp = sp;\r\n        for (let i = 0; i < 1; i++) {\r\n            if (sp.getChildAt(i) instanceof Laya.Sprite3D) {\r\n                var ssp = sp.getChildAt(i);\r\n                for (let j = 0; j < ssp._children.length; j++) {\r\n                    if (ssp._children[j] instanceof Laya.SkinnedMeshSprite3D) {\r\n                        var sm = ssp._children[j];\r\n                        if (!this.spArr[i]) {\r\n                            this.spArr[i] = [];\r\n                            this.cpArr[i] = [];\r\n                        }\r\n                        this.spArr[i][j] = sm.skinnedMeshRenderer.sharedMaterials;\r\n                        this.cpArr[i][j] = sm.skinnedMeshRenderer.sharedMaterials;\r\n                        this.initShander(i, j);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    initShander(i, j) {\r\n        var sms = this.spArr[i][j];\r\n        var cms = [];\r\n        this.cpArr[i][j] = cms;\r\n        for (let k = 0; k < sms.length; k++) {\r\n            var bm = sms[k];\r\n            let cm = new CustomMaterial();\r\n            cms.push(cm);\r\n            var bdata = bm._shaderValues.getData();\r\n            var tx;\r\n            for (let key in bdata) {\r\n                var data = bdata[key];\r\n                if (data instanceof Laya.Texture2D) {\r\n                    tx = data;\r\n                    cm.diffuseTexture = tx;\r\n                }\r\n            }\r\n            cm.marginalColor = new Laya.Vector3(1, 1, 1);\r\n        }\r\n    }\r\n    clearShader() {\r\n        if (!this.sp) {\r\n            return;\r\n        }\r\n        for (let i = 0; i < 1; i++) {\r\n            if (this.sp.getChildAt(i) instanceof Laya.Sprite3D) {\r\n                var ssp = this.sp.getChildAt(i);\r\n                for (let j = 0; j < ssp._children.length; j++) {\r\n                    if (ssp._children[j] instanceof Laya.SkinnedMeshSprite3D) {\r\n                        var sm = ssp._children[j];\r\n                        var sms = sm.skinnedMeshRenderer.sharedMaterials;\r\n                        for (let k = 0; k < sms.length; k++) {\r\n                            let cm = sms[k];\r\n                            var bdata = cm._shaderValues.getData();\r\n                            for (let key in bdata) {\r\n                                var data = bdata[key];\r\n                                if (data instanceof Laya.Texture2D) {\r\n                                    data && data.destroy();\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.cpArr.length = this.spArr.length = 0;\r\n    }\r\n    setShader0(sp, k) {\r\n        for (let i = 0; i < 1; i++) {\r\n            if (sp.getChildAt(i) instanceof Laya.Sprite3D) {\r\n                var ssp = sp.getChildAt(i);\r\n                for (let j = 0; j < ssp._children.length; j++) {\r\n                    if (ssp._children[j] instanceof Laya.SkinnedMeshSprite3D) {\r\n                        var sm = ssp._children[j];\r\n                        if (k == 0) {\r\n                            sm.skinnedMeshRenderer.sharedMaterials = this.spArr[i][j];\r\n                        }\r\n                        else {\r\n                            sm.skinnedMeshRenderer.sharedMaterials = this.cpArr[i][j];\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nMonsterShader.map = {};\r\n",
  "references": [
    "D:/game01/Layabox/Game3DUP/src/game/GameShaderObj.ts",
    "D:/game01/Layabox/Game3DUP/src/game/CustomMaterial.ts"
  ]
}
