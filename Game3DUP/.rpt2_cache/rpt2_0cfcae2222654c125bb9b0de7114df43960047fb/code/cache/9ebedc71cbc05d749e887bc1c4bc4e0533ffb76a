{
  "code": "import GamePro from \"../GamePro\";\r\nimport Game from \"../Game\";\r\nimport { ui } from \"./../../ui/layaMaxUI\";\r\nimport FootRotateScript from \"../controllerScript/FootRotateScript\";\r\nimport GameBG from \"../GameBG\";\r\nimport CoinsAI from \"../ai/CoinsAI\";\r\nimport CoinsMove from \"../move/CoinsMove\";\r\nimport GameHitBox from \"../GameHitBox\";\r\nexport default class Coin extends GamePro {\r\n    constructor() {\r\n        super(0, 1);\r\n        this.curLen = 0;\r\n        this.moveLen = 0;\r\n        this.status = 0;\r\n        var sp = Laya.Sprite3D.instantiate(Laya.loader.getRes(\"h5/coins/monster.lh\"));\r\n        this.setSp3d(sp);\r\n        sp.transform.localScale = new Laya.Vector3(1.5, 1.5, 1.5);\r\n        this.sp3d.addComponent(FootRotateScript);\r\n        this.setSpeed(0);\r\n        this.setGameAi(new CoinsAI());\r\n        this.setGameMove(new CoinsMove());\r\n        this._bulletShadow = new ui.test.BulletShadowUI();\r\n        Game.footLayer.addChild(this._bulletShadow);\r\n        this.setShadowSize(20);\r\n    }\r\n    static getOne() {\r\n        let coin = Laya.Pool.getItemByClass(Coin.TAG, Coin);\r\n        return coin;\r\n    }\r\n    setPos(monster, r) {\r\n        this.status = 1;\r\n        this.curLen = 0;\r\n        this.moveLen = 20 + Math.random() * GameBG.ww;\r\n        this.setXY2D(monster.pos2.x, monster.pos2.z);\r\n        this.setSpeed(2);\r\n        this.rotation(r);\r\n        this.startAi();\r\n        Game.layer3d.addChild(this.sp3d);\r\n        Game.footLayer.addChild(this._bulletShadow);\r\n    }\r\n    updateUI() {\r\n        super.updateUI();\r\n        this._bulletShadow && this._bulletShadow.pos(this.hbox.cx + 10, this.hbox.cy + 10);\r\n    }\r\n    onCom() {\r\n        this.setShadowSize(20);\r\n        let xx = GameBG.ww * this.sp3d.transform.localPositionX;\r\n        let yy = GameBG.ww * this.sp3d.transform.localPositionZ * Game.cameraCN.cos0;\r\n        this.setXY2D(xx, yy);\r\n        this._bulletShadow && this._bulletShadow.pos(this.hbox.cx + 10, this.hbox.cy);\r\n    }\r\n    fly() {\r\n        var a = GameHitBox.faceTo3D(this.hbox, Game.hero.hbox);\r\n        this.rotation(a);\r\n        this.status = 2;\r\n        this.curLen = 0;\r\n        this.moveLen = 0;\r\n        this._bulletShadow && this._bulletShadow.removeSelf();\r\n        this.setSpeed(40);\r\n    }\r\n    clear() {\r\n        this._bulletShadow && this._bulletShadow.removeSelf();\r\n        this.stopAi();\r\n        this.sp3d && this.sp3d.removeSelf();\r\n        Game.battleCoins++;\r\n        Laya.stage.event(Game.Event_COINS);\r\n        this.curLen = 0;\r\n        this.moveLen = 0;\r\n        this.status = 0;\r\n        Laya.Pool.recover(Coin.TAG, this);\r\n    }\r\n}\r\nCoin.TAG = \"Coin\";\r\n",
  "references": [
    "D:/game01/Layabox/Game3DUP/src/game/GamePro.ts",
    "D:/game01/Layabox/Game3DUP/src/game/GameProType.ts",
    "D:/game01/Layabox/Game3DUP/src/game/Game.ts",
    "D:/game01/Layabox/Game3DUP/src/game/player/Monster.ts",
    "D:/game01/Layabox/Game3DUP/src/ui/layaMaxUI.ts",
    "D:/game01/Layabox/Game3DUP/src/game/controllerScript/FootRotateScript.ts",
    "D:/game01/Layabox/Game3DUP/src/game/GameBG.ts",
    "D:/game01/Layabox/Game3DUP/src/game/ai/CoinsAI.ts",
    "D:/game01/Layabox/Game3DUP/src/game/move/CoinsMove.ts",
    "D:/game01/Layabox/Game3DUP/src/game/GameHitBox.ts"
  ]
}
