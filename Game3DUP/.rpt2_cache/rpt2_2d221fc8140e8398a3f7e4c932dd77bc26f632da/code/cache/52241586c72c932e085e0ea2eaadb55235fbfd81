{
  "code": "export default class ShakeUtils {\r\n    constructor() {\r\n        this.startPo = new Laya.Point();\r\n        this.flag = false;\r\n        this.arr = [-1, -1, -1, 1, 1, 1, 1, -1];\r\n        this.now = 0;\r\n        this.nowIndex = 0;\r\n    }\r\n    static setShakeUI(ani, box) {\r\n        ShakeUtils.shake.shakeAni = ani;\r\n        ShakeUtils.shake.shakeBox = box;\r\n    }\r\n    static execute(sp, time, moveLen) {\r\n        ShakeUtils.shake.exe(sp, time, moveLen);\r\n    }\r\n    static execute2(sp, time, rotateNum) {\r\n        ShakeUtils.shake.exe2(sp, time, rotateNum);\r\n    }\r\n    exe2(sp, delay, rotateNum) {\r\n        this.flag = false;\r\n        this.rotateNum = rotateNum;\r\n        this.sp = sp;\r\n        Laya.timer.loop(delay, this, this.loopFun2);\r\n        this.now = 0;\r\n    }\r\n    loopFun2() {\r\n        if (this.rotateNum <= 0) {\r\n            Laya.timer.clear(this, this.loopFun2);\r\n            this.sp.rotation = 0;\r\n            this.sp = null;\r\n            return;\r\n        }\r\n        this.flag = !this.flag;\r\n        this.rotateNum--;\r\n        this.sp.rotation = this.rotateNum * (this.flag ? -1 : 1);\r\n    }\r\n    exe(sp, time, moveLen) {\r\n        this.moveLen = moveLen;\r\n        this.time = time;\r\n        this.sp = sp;\r\n        this.startPo.setTo(sp.x, sp.y);\r\n        Laya.timer.clear(this, this.loopFun);\r\n        Laya.timer.frameLoop(1, this, this.loopFun);\r\n        this.startTime = Laya.Browser.now();\r\n        this.now = 0;\r\n    }\r\n    loopFun() {\r\n        if ((Laya.Browser.now() - this.startTime) > this.time) {\r\n            Laya.timer.clear(this, this.loopFun);\r\n            this.sp.pos(this.startPo.x, this.startPo.y);\r\n            this.sp = null;\r\n            return;\r\n        }\r\n        if (this.now >= this.arr.length) {\r\n            this.now = 0;\r\n        }\r\n        this.sp.pos(this.startPo.x + this.arr[this.now] * this.moveLen, this.startPo.y + this.arr[this.now + 1] * this.moveLen);\r\n        this.now += 2;\r\n    }\r\n    static shakeByUI(sp) {\r\n        ShakeUtils.shake.exeByUI(sp);\r\n    }\r\n    exeByUI(sp) {\r\n        this.sp = sp;\r\n        this.startPo.setTo(sp.x, sp.y);\r\n        Laya.timer.frameLoop(1, this, this.enterFun);\r\n    }\r\n    enterFun() {\r\n        if (this.nowIndex >= this.shakeAni.count) {\r\n            this.stopShakeByUI();\r\n            return;\r\n        }\r\n        this.shakeAni.index = this.nowIndex;\r\n        this.sp.pos(this.startPo.x + this.shakeBox.x, this.startPo.y + this.shakeBox.y);\r\n        this.nowIndex++;\r\n    }\r\n    stopShakeByUI() {\r\n        this.sp.pos(this.startPo.x, this.startPo.y);\r\n        Laya.timer.clear(this, this.enterFun);\r\n        this.nowIndex = 0;\r\n    }\r\n}\r\nShakeUtils.shake = new ShakeUtils();\r\n",
  "references": []
}
