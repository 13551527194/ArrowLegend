{
  "code": "export default class MemoryManager {\r\n    constructor() {\r\n        this.res = {};\r\n    }\r\n    add(url) {\r\n        let data = this.res[url];\r\n        if (data == null) {\r\n            data = new ResourceData();\r\n            data.url = url;\r\n            data.time = Date.now();\r\n            this.res[data.url] = data;\r\n        }\r\n        data.count++;\r\n    }\r\n    app(url) {\r\n        let data = this.res[url];\r\n        if (data) {\r\n            data.count--;\r\n        }\r\n    }\r\n    release() {\r\n        for (let key in this.res) {\r\n            let data = this.res[key];\r\n            if (data.count <= 0) {\r\n                let sp = Laya.loader.getRes(key);\r\n                sp && sp.destroy(true);\r\n                console.log(\"释放资源\", key);\r\n            }\r\n        }\r\n    }\r\n}\r\nMemoryManager.ins = new MemoryManager();\r\nexport class ResourceData {\r\n    constructor() {\r\n        this.url = '';\r\n        this.time = 0;\r\n        this.count = 0;\r\n    }\r\n}\r\n",
  "references": []
}
