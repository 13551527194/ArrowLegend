{
  "code": "import { ui } from \"../../../../ui/layaMaxUI\";\r\nimport App from \"../../../../core/App\";\r\nimport Session from \"../../../Session\";\r\nexport default class RankDialog extends ui.test.paihangUI {\r\n    constructor() {\r\n        super();\r\n        this.rankSkin = [\"paihang/yiming.png\", \"paihang/erming.png\", \"paihang/sanming.png\"];\r\n        this.list.vScrollBarSkin = \"\";\r\n        this.tab.selectHandler = new Laya.Handler(this, this.selectFun);\r\n        this.tab.selectedIndex = -1;\r\n        this.tab.selectedIndex = 0;\r\n        this.list.renderHandler = new Laya.Handler(this, this.renderFun);\r\n        this.list.selectEnable = true;\r\n        this.list.selectHandler = new Laya.Handler(this, this.listSelectFun);\r\n        if (Laya.Browser.onMiniGame == false) {\r\n            return;\r\n        }\r\n        if (App.sdkManager.haveRight) {\r\n            return;\r\n        }\r\n        else {\r\n            this.tab.disabled = true;\r\n            Laya.timer.callLater(this, this.shouQuan);\r\n        }\r\n    }\r\n    shouQuan() {\r\n        App.sdkManager.addUserInfoBtn(this.tab, new Laya.Handler(this, this.useFun));\r\n    }\r\n    useFun() {\r\n        Session.rankData.saveWorldRank();\r\n        this.tab.disabled = false;\r\n        this.tab.selectedIndex = 1;\r\n    }\r\n    listSelectFun(index) {\r\n        if (index == -1) {\r\n            return;\r\n        }\r\n    }\r\n    renderFun(cell, index) {\r\n        let obj = this.list.getItem(index);\r\n        cell.goldFc.value = parseInt(obj.score + \"\") + \"\";\r\n        cell.mingzi.text = obj.name;\r\n        let rank = parseInt(obj.rank);\r\n        cell.touxiang.skin = obj.url;\r\n        if (rank < 3) {\r\n            cell.fc1.visible = false;\r\n            cell.paiming.visible = true;\r\n            cell.paiming.skin = this.rankSkin[rank];\r\n        }\r\n        else {\r\n            cell.fc1.visible = true;\r\n            cell.paiming.visible = false;\r\n            cell.fc1.value = (rank + 1) + \"\";\r\n        }\r\n    }\r\n    selectFun(index) {\r\n        if (index == -1) {\r\n            return;\r\n        }\r\n        this[\"tab\" + index]();\r\n    }\r\n    tab0() {\r\n        this.wxOpen.visible = true;\r\n        this.list.visible = false;\r\n        this.myText.visible = false;\r\n        if (Laya.Browser.onMiniGame == false) {\r\n            return;\r\n        }\r\n        var obj = {};\r\n        obj.type = 0;\r\n        obj.openId = Session.SKEY;\r\n        Laya.Browser.window.wx.getOpenDataContext().postMessage(obj);\r\n    }\r\n    tab1() {\r\n        this.list.array = [];\r\n        this.wxOpen.visible = false;\r\n        this.list.visible = true;\r\n        this.myText.visible = true;\r\n        Session.rankData.getRank(this, this.rankFun);\r\n    }\r\n    rankFun(str) {\r\n        if (this.tab.selectedIndex != 1) {\r\n            return;\r\n        }\r\n        let obj = JSON.parse(str);\r\n        let myobj = obj.my;\r\n        let arr = obj.list;\r\n        this.list.array = arr;\r\n        let rank = parseInt(myobj.rank) + 1;\r\n        this.myText.text = \"当前排名:\" + rank;\r\n    }\r\n    sortList(arr) {\r\n        arr.sort(this.sortFun);\r\n        for (let i = 0; i < arr.length; i++) {\r\n            arr[i].rank = i;\r\n        }\r\n    }\r\n    sortFun(a, b) {\r\n        return parseInt(b.score) - parseInt(a.score);\r\n    }\r\n}\r\n",
  "references": [
    "D:/GirlGunGame/GirlGunGame/src/ui/layaMaxUI.ts",
    "D:/GirlGunGame/GirlGunGame/src/core/manager/SdkManager.ts",
    "D:/GirlGunGame/GirlGunGame/src/core/App.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/Session.ts"
  ]
}
