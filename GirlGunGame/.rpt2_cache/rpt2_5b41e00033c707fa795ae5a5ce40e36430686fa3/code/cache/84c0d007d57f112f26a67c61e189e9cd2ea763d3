{
  "code": "import SysRoleBase from \"../../../sys/SysRolebase\";\r\nimport SysRoleUp from \"../../../sys/SysRoleUp\";\r\nimport Session from \"../../../Session\";\r\nexport default class RollCell {\r\n    setValue(now, max) {\r\n        let vv = now / max;\r\n        this.progressBarImg.scrollRect = new Laya.Rectangle(0, 0, this.progressBarImg.width * vv, this.progressBarImg.height);\r\n        this.progressBarImg.visible = (vv != 0);\r\n        this.goldFc.value = now + \"/\" + max;\r\n    }\r\n    effect1() {\r\n        this.vs2.selectedIndex = 1;\r\n        this.lvUpBtn.scale(0, 0);\r\n        let t = new Laya.Tween();\r\n        t.to(this.lvUpBtn, { scaleX: 1, scaleY: 1 }, 400, Laya.Ease.backOut);\r\n    }\r\n    setData(roleId) {\r\n        let haveRold = SysRoleBase.have(roleId);\r\n        let sys = SysRoleBase.getSys(roleId);\r\n        let isLock = false;\r\n        if (sys && Session.homeData.adTimes < sys.videoLock) {\r\n            haveRold = false;\r\n            isLock = true;\r\n        }\r\n        if (haveRold) {\r\n            this.vs2.visible = true;\r\n            this.vs1.visible = true;\r\n            this.heroAddFc.visible = true;\r\n            if (Session.heroData.test(roleId, this.heroLvType)) {\r\n                this.lv.ani1.play(0, true);\r\n                this.lv.visible = true;\r\n            }\r\n            else {\r\n                this.lv.visible = false;\r\n            }\r\n        }\r\n        else {\r\n            this.vs2.visible = false;\r\n            this.vs1.visible = false;\r\n            this.heroBaseFc.value = \"0\";\r\n            this.heroAddFc.visible = false;\r\n            this.nowLvAddfc.value = \"+0\";\r\n            this.lv.visible = false;\r\n            if (isLock == false) {\r\n                return;\r\n            }\r\n        }\r\n        let lv = Session.heroData.getHeroLv(roleId, this.heroLvType);\r\n        let sysRoleBase = SysRoleBase.getSys(roleId);\r\n        let sysRoleUp = SysRoleUp.getSysRole(roleId, lv);\r\n        let cost = sysRoleUp.getCost(this.heroLvType);\r\n        let costType = sysRoleUp.getCostType(this.heroLvType);\r\n        let have = Session.homeData.getGoldByType(costType);\r\n        this.heroBaseFc.value = sysRoleBase.getValue(this.heroLvType) + \"\";\r\n        this.heroAddFc.value = \"+\" + SysRoleUp.getAddValue(roleId, lv, this.heroLvType);\r\n        this.heroAddFc.x = this.heroBaseFc.x + this.heroBaseFc.value.length * 23 + 10;\r\n        if (isLock) {\r\n            return;\r\n        }\r\n        this.lvUpBtnGoldText.text = sysRoleUp.costGold + \"\";\r\n        this.setValue(have, cost);\r\n        this.nowLvAddfc.value = \"+\" + sysRoleUp.getValue(this.heroLvType);\r\n        this.lvFc.value = lv + \"\";\r\n        if (lv >= sysRoleBase.roleLimt) {\r\n            this.vs1.selectedIndex = 1;\r\n            this.vs2.visible = false;\r\n            return;\r\n        }\r\n        this.vs2.visible = true;\r\n        this.vs1.selectedIndex = 0;\r\n        if (have >= cost) {\r\n            this.vs2.selectedIndex = 1;\r\n        }\r\n        else {\r\n            this.vs2.selectedIndex = 0;\r\n        }\r\n    }\r\n}\r\n",
  "references": [
    "D:/GirlGunGame/GirlGunGame/src/game/data/HeroData.ts",
    "D:/GirlGunGame/GirlGunGame/src/game/data/HomeData.ts",
    "D:/GirlGunGame/GirlGunGame/src/core/utils/MyEffect.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/sys/SysRolebase.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/sys/SysRoleUp.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/Session.ts",
    "D:/GirlGunGame/GirlGunGame/src/ui/layaMaxUI.ts"
  ]
}
