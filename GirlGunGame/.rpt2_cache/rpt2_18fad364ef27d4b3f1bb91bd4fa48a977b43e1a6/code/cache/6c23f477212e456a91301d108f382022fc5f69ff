{
  "code": "import GameConfig from \"./GameConfig\";\r\nimport GameBG from \"./game/GameBG\";\r\nimport GameMain from \"./main/GameMain\";\r\nimport { ui } from \"./ui/layaMaxUI\";\r\nimport App from \"./core/App\";\r\nimport PlatformID from \"./platforms/PlatformID\";\r\nimport HitType from \"./game/ai/HitType\";\r\nimport GameScaleAnimator1 from \"./game/ai/GameScaleAnimator1\";\r\nimport GameScaleAnimator2 from \"./game/ai/GameScaleAnimator2\";\r\nimport GameScaleAnimator3 from \"./game/ai/GameScaleAnimator3\";\r\nimport GameScaleAnimator4 from \"./game/ai/GameScaleAnimator4\";\r\nimport NPC_1001 from \"./main/scene/battle/npc/NPC_1001\";\r\nimport NPC_1002 from \"./main/scene/battle/npc/NPC_1002\";\r\nimport NPC_1003 from \"./main/scene/battle/npc/NPC_1003\";\r\nimport AttackType from \"./game/ai/AttackType\";\r\nimport AIType from \"./game/ai/AIType\";\r\nimport BaseAI from \"./game/ai/BaseAi\";\r\nimport FlyAndHitAi from \"./game/ai/FlyAndHitAi\";\r\nimport FlowerAI from \"./game/ai/FlowerAI\";\r\nimport StoneAI from \"./game/ai/StoneAI\";\r\nimport TreeAI from \"./game/ai/TreeAI\";\r\nimport RandMoveAI from \"./game/ai/RandMoveAI\";\r\nimport MoveAndHitAi from \"./game/ai/MoveAndHitAi\";\r\nimport ReboundAI from \"./game/ai/ReboundAI\";\r\nimport JumpFollowAI from \"./game/ai/JumpFollowAI\";\r\nimport ArcherAI from \"./game/ai/ArcherAI\";\r\nimport MoveType from \"./game/move/MoveType\";\r\nimport FlyGameMove from \"./game/move/FlyGameMove\";\r\nimport PlaneGameMove from \"./game/move/PlaneGameMove\";\r\nimport FixedGameMove from \"./game/move/FixedGameMove\";\r\nimport JumpMove from \"./game/move/JumpMove\";\r\nimport BackMove from \"./game/move/BackMove\";\r\nimport TestPlatform from \"./platforms/TestPlatform\";\r\nimport WXPlatform from \"./platforms/WXPlatform\";\r\nimport BuffID from \"./game/buff/BuffID\";\r\nimport FireBuff from \"./game/skill/player/FireBuff\";\r\nimport IceBuff from \"./game/skill/player/IceBuff\";\r\nimport Game from \"./game/Game\";\r\nimport WudiBuff from \"./game/skill/player/WudiBuff\";\r\nimport ShitouAI from \"./game/ai/ShitouAI\";\r\nimport FlyGameMove2 from \"./game/move/FlyGameMove2\";\r\nimport MyEffect from \"./core/utils/MyEffect\";\r\nimport Session from \"./main/Session\";\r\nimport ZipLoader from \"./core/utils/ZipLoader\";\r\nimport GameEvent from \"./main/GameEvent\";\r\nimport NPC_1001_view from \"./main/scene/battle/npc/NPC_1001_view\";\r\nimport HomeLoading from \"./main/HomeLoading\";\r\nimport InitView from \"./main/InitView\";\r\nimport GameSoundManager from \"./core/manager/GameSoundManager\";\r\nimport LogType from \"./core/manager/LogType\";\r\nclass Main {\r\n    constructor() {\r\n        this.isSuccess = false;\r\n        UIConfig.popupBgAlpha = 0.8;\r\n        if (window[\"Laya3D\"])\r\n            Laya3D.init(GameBG.width, GameBG.height);\r\n        else\r\n            Laya.init(GameBG.width, GameBG.height, Laya[\"WebGL\"]);\r\n        Laya[\"Physics\"] && Laya[\"Physics\"].enable();\r\n        Laya[\"DebugPanel\"] && Laya[\"DebugPanel\"].enable();\r\n        Laya.stage.bgColor = \"#000000\";\r\n        Laya.stage.scaleMode = Laya.Stage.SCALE_FIXED_WIDTH;\r\n        Laya.stage.screenMode = Laya.Stage.SCREEN_VERTICAL;\r\n        Laya.URL.exportSceneToJson = GameConfig.exportSceneToJson;\r\n        console.log(\"代码版本\", Game.codeVer);\r\n        console.log(\"代码版本\", Game.resVer);\r\n        if (Laya.Browser.window.wx) {\r\n            Laya.URL.basePath = \"https://img.kuwan511.com/arrowLegend/\" + Game.resVer + \"/\";\r\n            Laya.MiniAdpter.nativefiles = Game.nativefiles;\r\n            Laya.Browser.window.wx.getSystemInfo({\r\n                success(res) {\r\n                    let model = res.model;\r\n                    GameBG.height = GameBG.width / res.windowWidth * res.windowHeight;\r\n                }\r\n            });\r\n        }\r\n        App.init();\r\n        App.soundManager.pre = \"h5/sounds/\";\r\n        this._initView = new InitView();\r\n        Laya.stage.once(GameEvent.INIT_COM, this, this.onInitCom);\r\n        Laya.stage.addChild(this._initView);\r\n        MyEffect.initBtnEffect();\r\n        let bg = new ui.test.StageBgUI();\r\n        Laya.stage.addChild(bg);\r\n        bg.centerY = 0;\r\n        bg.zOrder = -10;\r\n        bg.mouseEnabled = false;\r\n    }\r\n    zipFun(arr) {\r\n        GameMain.initDialog();\r\n        GameMain.initTable(arr);\r\n        Session.init();\r\n        this.authSetting();\r\n        Laya.stage.event(GameEvent.CONFIG_OVER);\r\n    }\r\n    onInitCom() {\r\n        Laya.stage.addChild(App.layerManager);\r\n        ZipLoader.instance.zipFun(Laya.loader.getRes(\"h5/tables.zip\"), new Laya.Handler(this, this.zipFun));\r\n        this.regClass();\r\n        App.gameSoundManager.reg(GameSoundManager.BTN, App.soundManager.pre + \"fx_button.wav\");\r\n    }\r\n    authSetting() {\r\n        if (!this.homePage) {\r\n            this.homePage = new HomeLoading();\r\n        }\r\n        Laya.stage.addChild(this.homePage);\r\n        App.sdkManager.log(LogType.SHOW_LOGIN_BTN, \"显示登陆按钮\");\r\n        let BP = Laya.ClassUtils.getRegClass(\"p\" + App.platformId);\r\n        if (!this.curBP) {\r\n            this.curBP = new BP();\r\n        }\r\n        this.curBP.checkUpdate();\r\n        this.curBP.getUserInfo(this.getUserInfoSuccess.bind(this));\r\n        this._initView && this._initView.removeSelf();\r\n    }\r\n    getUserInfoSuccess() {\r\n        if (this.isSuccess) {\r\n            return;\r\n        }\r\n        this.isSuccess = true;\r\n        App.sdkManager.log(LogType.START_LOADING, \"开始加载资源\");\r\n        this.homePage.load();\r\n        console.log(\"授权成功，开始加载\");\r\n    }\r\n    regClass() {\r\n        var REG = Laya.ClassUtils.regClass;\r\n        REG(\"HIT_\" + HitType.hit1, GameScaleAnimator1);\r\n        REG(\"HIT_\" + HitType.hit2, GameScaleAnimator2);\r\n        REG(\"HIT_\" + HitType.hit3, GameScaleAnimator4);\r\n        REG(\"HIT_\" + HitType.hit4, GameScaleAnimator3);\r\n        REG(\"NPC1001\", NPC_1001);\r\n        REG(\"NPC1002\", NPC_1002);\r\n        REG(\"NPC1003\", NPC_1003);\r\n        REG(\"NPCVIEW1001\", NPC_1001_view);\r\n        REG(AttackType.TAG + AIType.NOTHAS, BaseAI);\r\n        REG(AttackType.TAG + AIType.FLYHIT, FlyAndHitAi);\r\n        REG(AttackType.TAG + AIType.BULLET, FlowerAI);\r\n        REG(AttackType.TAG + AIType.STONE, StoneAI);\r\n        REG(AttackType.TAG + AIType.SHITOUREN, ShitouAI);\r\n        REG(AttackType.TAG + AIType.TREE, TreeAI);\r\n        REG(AttackType.TAG + AIType.RANDOM_MOVE, RandMoveAI);\r\n        REG(AttackType.TAG + AIType.MOVEHIT, MoveAndHitAi);\r\n        REG(AttackType.TAG + AIType.REBOUND, ReboundAI);\r\n        REG(AttackType.TAG + AIType.JUMP_FOLLOW, JumpFollowAI);\r\n        REG(AttackType.TAG + AIType.RED_LINE, ArcherAI);\r\n        REG(MoveType.TAG + MoveType.FLY, FlyGameMove);\r\n        REG(MoveType.TAG + MoveType.MOVE, PlaneGameMove);\r\n        REG(MoveType.TAG + MoveType.FIXED, FixedGameMove);\r\n        REG(MoveType.TAG + MoveType.JUMP, JumpMove);\r\n        REG(MoveType.TAG + MoveType.BACK, BackMove);\r\n        REG(MoveType.TAG + MoveType.BOOM, FlyGameMove2);\r\n        REG(\"p\" + PlatformID.TEST, TestPlatform);\r\n        REG(\"p\" + PlatformID.H5, TestPlatform);\r\n        REG(\"p\" + PlatformID.WX, WXPlatform);\r\n        REG(\"BUFF\" + BuffID.WUDI_5009, WudiBuff);\r\n        REG(\"BUFF\" + BuffID.FIRE_2001, FireBuff);\r\n        REG(\"BUFF\" + BuffID.FIRE_5001, FireBuff);\r\n        REG(\"BUFF\" + BuffID.DU_2002, FireBuff);\r\n        REG(\"BUFF\" + BuffID.DU_5002, FireBuff);\r\n        REG(\"BUFF\" + BuffID.ICE_2003, IceBuff);\r\n        REG(\"BUFF\" + BuffID.ICE_5003, IceBuff);\r\n    }\r\n}\r\nnew Main();\r\n",
  "references": [
    "D:/GirlGunGame/GirlGunGame/src/GameConfig.ts",
    "D:/GirlGunGame/GirlGunGame/src/game/GameBG.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/GameMain.ts",
    "D:/GirlGunGame/GirlGunGame/src/ui/layaMaxUI.ts",
    "D:/GirlGunGame/GirlGunGame/src/core/App.ts",
    "D:/GirlGunGame/GirlGunGame/src/platforms/PlatformID.ts",
    "D:/GirlGunGame/GirlGunGame/src/platforms/BasePlatform.ts",
    "D:/GirlGunGame/GirlGunGame/src/game/ai/HitType.ts",
    "D:/GirlGunGame/GirlGunGame/src/game/ai/GameScaleAnimator1.ts",
    "D:/GirlGunGame/GirlGunGame/src/game/ai/GameScaleAnimator2.ts",
    "D:/GirlGunGame/GirlGunGame/src/game/ai/GameScaleAnimator3.ts",
    "D:/GirlGunGame/GirlGunGame/src/game/ai/GameScaleAnimator4.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/scene/battle/npc/NPC_1001.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/scene/battle/npc/NPC_1002.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/scene/battle/npc/NPC_1003.ts",
    "D:/GirlGunGame/GirlGunGame/src/game/ai/AttackType.ts",
    "D:/GirlGunGame/GirlGunGame/src/game/ai/AIType.ts",
    "D:/GirlGunGame/GirlGunGame/src/game/ai/BaseAi.ts",
    "D:/GirlGunGame/GirlGunGame/src/game/ai/FlyAndHitAi.ts",
    "D:/GirlGunGame/GirlGunGame/src/game/ai/FlowerAI.ts",
    "D:/GirlGunGame/GirlGunGame/src/game/ai/StoneAI.ts",
    "D:/GirlGunGame/GirlGunGame/src/game/ai/TreeAI.ts",
    "D:/GirlGunGame/GirlGunGame/src/game/ai/RandMoveAI.ts",
    "D:/GirlGunGame/GirlGunGame/src/game/ai/MoveAndHitAi.ts",
    "D:/GirlGunGame/GirlGunGame/src/game/ai/ReboundAI.ts",
    "D:/GirlGunGame/GirlGunGame/src/game/ai/JumpFollowAI.ts",
    "D:/GirlGunGame/GirlGunGame/src/game/ai/ArcherAI.ts",
    "D:/GirlGunGame/GirlGunGame/src/game/move/MoveType.ts",
    "D:/GirlGunGame/GirlGunGame/src/game/move/FlyGameMove.ts",
    "D:/GirlGunGame/GirlGunGame/src/game/move/PlaneGameMove.ts",
    "D:/GirlGunGame/GirlGunGame/src/game/move/FixedGameMove.ts",
    "D:/GirlGunGame/GirlGunGame/src/game/move/JumpMove.ts",
    "D:/GirlGunGame/GirlGunGame/src/game/move/BackMove.ts",
    "D:/GirlGunGame/GirlGunGame/src/platforms/TestPlatform.ts",
    "D:/GirlGunGame/GirlGunGame/src/platforms/WXPlatform.ts",
    "D:/GirlGunGame/GirlGunGame/src/game/buff/BuffID.ts",
    "D:/GirlGunGame/GirlGunGame/src/game/skill/player/FireBuff.ts",
    "D:/GirlGunGame/GirlGunGame/src/game/skill/player/IceBuff.ts",
    "D:/GirlGunGame/GirlGunGame/src/game/Game.ts",
    "D:/GirlGunGame/GirlGunGame/src/game/skill/player/WudiBuff.ts",
    "D:/GirlGunGame/GirlGunGame/src/game/ai/ShitouAI.ts",
    "D:/GirlGunGame/GirlGunGame/src/game/move/FlyGameMove2.ts",
    "D:/GirlGunGame/GirlGunGame/src/core/utils/MyEffect.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/Session.ts",
    "D:/GirlGunGame/GirlGunGame/src/core/utils/ZipLoader.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/GameEvent.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/scene/battle/npc/NPC_1001_view.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/HomeLoading.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/InitView.ts",
    "D:/GirlGunGame/GirlGunGame/src/core/manager/GameSoundManager.ts",
    "D:/GirlGunGame/GirlGunGame/src/core/manager/LogType.ts"
  ]
}
