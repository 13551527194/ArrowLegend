{
  "code": "import { ui } from \"./../../../ui/layaMaxUI\";\r\nimport Game from \"../../../game/Game\";\r\nimport SkillGrid from \"./SkillGrid\";\r\nimport App from \"../../../core/App\";\r\nimport Session from \"../../Session\";\r\nimport { AD_TYPE } from \"../../../ADType\";\r\nexport default class SelectNewSkill extends ui.test.battlestopUI {\r\n    constructor() {\r\n        super();\r\n        this.grid1 = new SkillGrid(new Laya.Handler(this, this.onClick));\r\n        this.grid2 = new SkillGrid(new Laya.Handler(this, this.onClick));\r\n        this.box1.addChild(this.grid1);\r\n        this.box2.addChild(this.grid2);\r\n        this.queding.deshuliang.text = \"刷新\";\r\n        App.sdkManager.initAdBtn(this.queding.fuhuo, AD_TYPE.AD_CHANGE_SKILL);\r\n        this.queding.fuhuo.clickHandler = new Laya.Handler(this, this.showAD);\r\n        this.on(Laya.Event.DISPLAY, this, this.onDis);\r\n    }\r\n    showAD() {\r\n        App.sdkManager.playAdVideo(AD_TYPE.AD_CHANGE_SKILL, new Laya.Handler(this, this.onChangeSkill));\r\n    }\r\n    onClick(sys) {\r\n        console.log(sys.skillName);\r\n        if (!Game.hero.changeBlood(sys)) {\r\n            Game.skillManager.addSkill(sys);\r\n        }\r\n        Game.bg.clearNpc();\r\n        this.removeSelf();\r\n    }\r\n    onDis() {\r\n        Game.executor.stop_();\r\n        this.box1.scaleX = 1;\r\n        this.box2.scaleX = 1;\r\n        this.setSkill();\r\n    }\r\n    onChangeSkill() {\r\n        this.setSkill();\r\n    }\r\n    setSkill() {\r\n        let id = Game.battleLoader.chapterId == 1 ? 1005 : 1004;\r\n        this.grid1.update(Game.skillManager.getRandomSkillByNpcId(id));\r\n        this.grid2.update(Game.skillManager.getRandomSkillByNpcId(id));\r\n    }\r\n    removeSelf() {\r\n        if (Session.talentData.dropLevelhp > 0) {\r\n            Game.hero.addBlood(Session.talentData.dropLevelhp);\r\n        }\r\n        console.log(\"战斗内升级回血\", Session.talentData.dropLevelhp);\r\n        Game.executor.start();\r\n        Game.state = 0;\r\n        return super.removeSelf();\r\n    }\r\n}\r\n",
  "references": [
    "D:/GirlGunGame/GirlGunGame/src/ui/layaMaxUI.ts",
    "D:/GirlGunGame/GirlGunGame/src/game/Game.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/scene/battle/SkillGrid.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/sys/SysSkill.ts",
    "D:/GirlGunGame/GirlGunGame/src/core/App.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/sys/SysBuff.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/sys/SysNpc.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/Session.ts",
    "D:/GirlGunGame/GirlGunGame/src/ADType.ts"
  ]
}
