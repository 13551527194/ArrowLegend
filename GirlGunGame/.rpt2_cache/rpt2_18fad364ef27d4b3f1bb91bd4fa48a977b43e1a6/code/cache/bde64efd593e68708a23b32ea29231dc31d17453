{
  "code": "import App from \"../core/App\";\r\nimport Game from \"../game/Game\";\r\nimport SysChapter from \"./sys/SysChapter\";\r\nimport SysMap from \"./sys/SysMap\";\r\nimport SysEnemy from \"./sys/SysEnemy\";\r\nimport SysBullet from \"./sys/SysBullet\";\r\nimport SysLevel from \"./sys/SysLevel\";\r\nimport SysSkill from \"./sys/SysSkill\";\r\nimport SysBuff from \"./sys/SysBuff\";\r\nimport SysNpc from \"./sys/SysNpc\";\r\nimport GameAlert from \"./GameAlert\";\r\nimport CookieKey from \"../gameCookie/CookieKey\";\r\nimport SysRoleBase from \"./sys/SysRolebase\";\r\nimport SysRoleUp from \"./sys/SysRoleUp\";\r\nimport SysHero from \"./sys/SysHero\";\r\nimport SysTalentCost from \"./sys/SysTalentCost\";\r\nimport SysTalent from \"./sys/SysTalent\";\r\nimport SysTalentInfo from \"./sys/SysTalentInfo\";\r\nimport Session from \"./Session\";\r\nimport TimeGoldDialog from \"./scene/main/timegold/TimeGoldDialog\";\r\nimport RankDialog from \"./scene/main/rank/RankDialog\";\r\nimport SysItem from \"./sys/SysItem\";\r\nimport { Guide_Type } from \"./guide/GuideManager\";\r\nimport LogType from \"../core/manager/LogType\";\r\nexport default class GameMain {\r\n    constructor() {\r\n        this.zipFun();\r\n    }\r\n    zipFun() {\r\n        Game.alert = new GameAlert();\r\n        if (Session.homeData.isGuide) {\r\n            Game.battleLoader.preload();\r\n            App.sdkManager.log(LogType.START_LOADING_GUIDE, \"加载进来显示主界面\");\r\n            Game.battleLoader.load();\r\n        }\r\n        else {\r\n            Game.showMain();\r\n            Game.battleLoader.preload();\r\n            App.sdkManager.log(LogType.SHOW_MAIN, \"加载进来显示主界面\");\r\n            if (Session.homeData.newStat != Guide_Type.over) {\r\n                return;\r\n            }\r\n            Game.cookie.getCookie(CookieKey.CURRENT_BATTLE, (res) => {\r\n                if (res) {\r\n                    Game.alert.onShow(\"是否继续未完成的战斗?\", new Laya.Handler(this, this.onContinue, [res]), new Laya.Handler(this, this.onCancel));\r\n                }\r\n            });\r\n        }\r\n    }\r\n    onCancel() {\r\n        Game.cookie.removeCookie(CookieKey.CURRENT_BATTLE);\r\n    }\r\n    onContinue(res) {\r\n        Game.battleLoader.load(res);\r\n        console.log(\"继续战斗\", res);\r\n    }\r\n    static initTable(arr) {\r\n        App.tableManager.register(SysChapter.NAME, SysChapter);\r\n        App.tableManager.register(SysMap.NAME, SysMap);\r\n        App.tableManager.register(SysEnemy.NAME, SysEnemy);\r\n        App.tableManager.register(SysBullet.NAME, SysBullet);\r\n        App.tableManager.register(SysLevel.NAME, SysLevel);\r\n        App.tableManager.register(SysSkill.NAME, SysSkill);\r\n        App.tableManager.register(SysBuff.NAME, SysBuff);\r\n        App.tableManager.register(SysNpc.NAME, SysNpc);\r\n        App.tableManager.register(SysRoleBase.NAME, SysRoleBase);\r\n        App.tableManager.register(SysItem.NAME, SysItem);\r\n        App.tableManager.register(SysRoleUp.NAME, SysRoleUp);\r\n        App.tableManager.register(SysHero.NAME, SysHero);\r\n        App.tableManager.register(SysTalentCost.NAME, SysTalentCost);\r\n        App.tableManager.register(SysTalentInfo.NAME, SysTalentInfo);\r\n        App.tableManager.register(SysTalent.NAME, SysTalent);\r\n        App.tableManager.onParse(arr);\r\n        let mapArr = App.tableManager.getTable(SysMap.NAME);\r\n        let len = mapArr.length;\r\n        for (let i = 0; i < len; i++) {\r\n            let sysMap = mapArr[i];\r\n            if (SysMap.dic[sysMap.stageId] == null) {\r\n                SysMap.dic[sysMap.stageId] = [];\r\n            }\r\n            SysMap.dic[sysMap.stageId].push(sysMap);\r\n        }\r\n        for (let key in SysMap.dic) {\r\n            let tArr = SysMap.dic[key];\r\n            tArr.sort((a, b) => {\r\n                return a.id - b.id;\r\n            });\r\n        }\r\n    }\r\n    static initDialog() {\r\n        App.dialogManager.register(GameMain.TIME_GOLD, TimeGoldDialog, [\"res/atlas/timegold.atlas\"]);\r\n        App.dialogManager.register(GameMain.RANK_DIALOG, RankDialog, [\"res/atlas/paihang.atlas\"]);\r\n    }\r\n}\r\nGameMain.TIME_GOLD = \"TIME_GOLD\";\r\nGameMain.RANK_DIALOG = \"RANK_DIALOG\";\r\n",
  "references": [
    "D:/GirlGunGame/GirlGunGame/src/core/utils/ZipLoader.ts",
    "D:/GirlGunGame/GirlGunGame/src/core/App.ts",
    "D:/GirlGunGame/GirlGunGame/src/game/Game.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/sys/SysChapter.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/sys/SysMap.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/sys/SysEnemy.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/sys/SysBullet.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/sys/SysLevel.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/sys/SysSkill.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/sys/SysBuff.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/sys/SysNpc.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/GameAlert.ts",
    "D:/GirlGunGame/GirlGunGame/src/gameCookie/CookieKey.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/sys/SysRolebase.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/sys/SysRoleUp.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/sys/SysHero.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/sys/SysTalentCost.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/sys/SysTalent.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/sys/SysTalentInfo.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/GameEvent.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/Session.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/scene/main/timegold/TimeGoldDialog.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/scene/main/rank/RankDialog.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/sys/SysItem.ts",
    "D:/GirlGunGame/GirlGunGame/src/main/guide/GuideManager.ts",
    "D:/GirlGunGame/GirlGunGame/src/core/manager/LogType.ts"
  ]
}
