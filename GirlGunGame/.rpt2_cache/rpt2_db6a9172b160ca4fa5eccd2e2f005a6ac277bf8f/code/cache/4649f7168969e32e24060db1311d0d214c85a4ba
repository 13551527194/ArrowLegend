{
  "code": "import Game from \"../Game\";\r\nimport GameHitBox from \"../GameHitBox\";\r\nimport Monster from \"../player/Monster\";\r\nimport MonsterBullet from \"../player/MonsterBullet\";\r\nimport BoomCircle from \"./BoomCircle\";\r\nexport default class BoomEffect {\r\n    constructor() {\r\n        this.effectId = 0;\r\n    }\r\n    static getEffect(pro, sys) {\r\n        if (!sys) {\r\n            return null;\r\n        }\r\n        let tag = BoomEffect.TAG + sys.boomEffect;\r\n        Game.poolTagArr[tag] = tag;\r\n        let effect = Laya.Pool.getItemByClass(tag, BoomEffect);\r\n        if (sys.attackAngle > 0) {\r\n            if (!effect.boomCircle) {\r\n                effect.boomCircle = new BoomCircle();\r\n            }\r\n            Game.bg._box.addChild(effect.boomCircle);\r\n            effect.boomCircle.img.scale(sys.attackAngle / 64, sys.attackAngle / 64);\r\n            effect.boomCircle.pos(pro.hbox.cx, pro.hbox.cy);\r\n            Laya.timer.once(500, this, () => {\r\n                effect.recover();\r\n            });\r\n            if (GameHitBox.faceToLenth(pro.hbox, Game.hero.hbox) <= sys.attackAngle) {\r\n                if (pro instanceof Monster) {\r\n                    pro.hurtValue = pro.sysEnemy.enemyAttack;\r\n                }\r\n                else if (pro instanceof MonsterBullet) {\r\n                    pro.hurtValue = pro.enemy.sysEnemy.enemyAttack;\r\n                }\r\n                Game.hero.hbox.linkPro_.event(Game.Event_Hit, pro);\r\n            }\r\n        }\r\n        if (sys.boomEffect <= 0) {\r\n            return null;\r\n        }\r\n        if (!effect.pro) {\r\n            effect.pro = pro;\r\n            effect.effectId = sys.boomEffect;\r\n            effect.sp3d = Laya.Sprite3D.instantiate(Laya.loader.getRes(\"h5/bulletsEffect/\" + sys.boomEffect + \"/monster.lh\"));\r\n        }\r\n        effect.sp3d.transform.localPositionX = pro.sp3d.transform.localPositionX;\r\n        effect.sp3d.transform.localPositionZ = pro.sp3d.transform.localPositionZ;\r\n        Game.layer3d.addChild(effect.sp3d);\r\n        Laya.timer.once(500, this, () => {\r\n            effect.recover();\r\n        });\r\n    }\r\n    recover() {\r\n        this.pro = null;\r\n        this.boomCircle && this.boomCircle.removeSelf();\r\n        this.sp3d && this.sp3d.removeSelf();\r\n        Laya.Pool.recover(BoomEffect.TAG + this.effectId, this);\r\n    }\r\n}\r\nBoomEffect.TAG = \"BoomEffect\";\r\n",
  "references": [
    "D:/gitworker/GirlGunGame/src/game/Game.ts",
    "D:/gitworker/GirlGunGame/src/game/GamePro.ts",
    "D:/gitworker/GirlGunGame/src/main/scene/battle/MemoryManager.ts",
    "D:/gitworker/GirlGunGame/src/main/sys/SysBullet.ts",
    "D:/gitworker/GirlGunGame/src/game/GameHitBox.ts",
    "D:/gitworker/GirlGunGame/src/game/player/Monster.ts",
    "D:/gitworker/GirlGunGame/src/game/player/MonsterBullet.ts",
    "D:/gitworker/GirlGunGame/src/game/effect/BoomCircle.ts",
    "D:/gitworker/GirlGunGame/src/game/GameBG.ts"
  ]
}
