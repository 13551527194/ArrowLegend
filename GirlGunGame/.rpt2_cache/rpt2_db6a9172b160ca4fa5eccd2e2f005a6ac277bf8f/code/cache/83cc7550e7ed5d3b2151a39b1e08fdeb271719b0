{
  "code": "import { ui } from \"../ui/layaMaxUI\";\r\nimport App from \"../core/App\";\r\nimport GameEvent from \"./GameEvent\";\r\nimport PlatformID from \"../platforms/PlatformID\";\r\nimport TestCookie from \"../gameCookie/TestCookie\";\r\nimport WXCookie from \"../gameCookie/WXCookie\";\r\nimport Game from \"../game/Game\";\r\nimport CookieKey from \"../gameCookie/CookieKey\";\r\nexport default class InitView extends ui.test.initViewUI {\r\n    constructor() {\r\n        super();\r\n        this.on(Laya.Event.DISPLAY, this, this.onDis);\r\n    }\r\n    onDis() {\r\n        this.initTxt.text = \"0%\";\r\n        Laya.loader.load(\"h5/config.json\", new Laya.Handler(this, this.configFun));\r\n    }\r\n    configFun() {\r\n        let config = Laya.loader.getRes(\"h5/config.json\");\r\n        App.platformId = config.platformId;\r\n        App.serverIP = config.platforms[App.platformId];\r\n        let bc;\r\n        if (App.platformId != PlatformID.WX) {\r\n            bc = new TestCookie();\r\n        }\r\n        else if (App.platformId == PlatformID.WX) {\r\n            bc = new WXCookie();\r\n        }\r\n        Game.cookie = bc;\r\n        Game.cookie.getCookie(CookieKey.MUSIC_SWITCH, (res) => {\r\n            if (res == null) {\r\n                Game.cookie.setCookie(CookieKey.MUSIC_SWITCH, { \"state\": 1 });\r\n                App.soundManager.setMusicVolume(1);\r\n            }\r\n            else {\r\n                App.soundManager.setMusicVolume(res.state);\r\n            }\r\n        });\r\n        Game.cookie.getCookie(CookieKey.SOUND_SWITCH, (res) => {\r\n            if (res == null) {\r\n                Game.cookie.setCookie(CookieKey.SOUND_SWITCH, { \"state\": 1 });\r\n                App.soundManager.setSoundVolume(1);\r\n            }\r\n            else {\r\n                App.soundManager.setSoundVolume(res.state);\r\n            }\r\n        });\r\n        Game.playBgMusic();\r\n        let arr = [{ url: \"h5/tables.zip\", type: Laya.Loader.BUFFER }];\r\n        for (let i = 0; i < Game.nativefiles.length; i++) {\r\n            arr.push({ url: Game.nativefiles[i], type: Laya.Loader.IMAGE });\r\n        }\r\n        Laya.loader.load(arr, new Laya.Handler(this, this.onInitCom), new Laya.Handler(this, this.onInitProgress));\r\n    }\r\n    onInitCom() {\r\n        Laya.stage.event(GameEvent.INIT_COM);\r\n    }\r\n    onInitProgress(value) {\r\n        value = value * 100;\r\n        this.initTxt.text = \"\" + value.toFixed(0) + \"%\";\r\n    }\r\n}\r\n",
  "references": [
    "D:/gitworker/GirlGunGame/src/ui/layaMaxUI.ts",
    "D:/gitworker/GirlGunGame/src/core/App.ts",
    "D:/gitworker/GirlGunGame/src/main/GameEvent.ts",
    "D:/gitworker/GirlGunGame/src/gameCookie/BaseCookie.ts",
    "D:/gitworker/GirlGunGame/src/platforms/PlatformID.ts",
    "D:/gitworker/GirlGunGame/src/gameCookie/TestCookie.ts",
    "D:/gitworker/GirlGunGame/src/gameCookie/WXCookie.ts",
    "D:/gitworker/GirlGunGame/src/game/Game.ts",
    "D:/gitworker/GirlGunGame/src/gameCookie/CookieKey.ts"
  ]
}
