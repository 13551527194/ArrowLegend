{
  "code": "import { ui } from \"./../../../../ui/layaMaxUI\";\r\nimport Session from \"../../../Session\";\r\nimport SysHero from \"../../../sys/SysHero\";\r\nimport App from \"../../../../core/App\";\r\nimport { GoldType } from \"../../../../game/data/HomeData\";\r\nimport GameEvent from \"../../../GameEvent\";\r\nexport default class LvUpView extends ui.test.shengjiUI {\r\n    constructor() {\r\n        super();\r\n        this.delayTime = 200;\r\n        this.on(Laya.Event.DISPLAY, this, this.onDis);\r\n        this.on(Laya.Event.CLICK, this, this.onCloseView);\r\n    }\r\n    onCloseView() {\r\n        this.removeSelf();\r\n        Laya.timer.clear(this, this.onLoop);\r\n        App.sendEvent(GameEvent.LV_UP_VIEW_2);\r\n    }\r\n    onDis() {\r\n        Laya.MouseManager.enabled = false;\r\n        let newLv = Session.homeData.playerLv;\r\n        this.lvClip.value = \"\" + newLv;\r\n        this.lvLabel.text = \"\" + newLv;\r\n        this.sysHero = App.tableManager.getDataByNameAndId(SysHero.NAME, newLv);\r\n        Session.homeData.changeGold(GoldType.GOLD, this.sysHero.gold);\r\n        Session.homeData.changeGold(GoldType.BLUE_DIAMONG, this.sysHero.blueDiamond);\r\n        Session.homeData.changeGold(GoldType.RED_DIAMONG, this.sysHero.redDiamond);\r\n        Laya.timer.frameLoop(1, this, this.onLoop);\r\n        this.dunpaiBox.visible = false;\r\n        this.lvBox.visible = false;\r\n        this.lingqu.visible = false;\r\n        this.lanBox.visible = false;\r\n        this.ziBox.visible = false;\r\n        this.coinBox.visible = false;\r\n        this.rebornBtn.visible = false;\r\n        this.hh = 800;\r\n        this.dunpaiBox.visible = true;\r\n        this.dunpaiBox.scale(2.5, 2.5);\r\n        this.dunpaiBox.alpha = 0;\r\n        Laya.Tween.to(this.dunpaiBox, { scaleX: 1, scaleY: 1, alpha: 1 }, this.delayTime, null, new Laya.Handler(this, this.onNext));\r\n    }\r\n    onNext() {\r\n        this.lvBox.visible = true;\r\n        this.lvBox.scale(2.5, 2.5);\r\n        this.lvBox.alpha = 0;\r\n        Laya.Tween.to(this.lvBox, { scaleX: 1, scaleY: 1, alpha: 1 }, this.delayTime, null, new Laya.Handler(this, this.onNext1));\r\n    }\r\n    onNext1() {\r\n        this.lingqu.visible = true;\r\n        this.lingqu.scale(2.5, 2.5);\r\n        this.lingqu.alpha = 0;\r\n        Laya.Tween.to(this.lingqu, { scaleX: 1, scaleY: 1, alpha: 1 }, this.delayTime, null, new Laya.Handler(this, this.onNext2));\r\n    }\r\n    onNext2() {\r\n        if (this.sysHero.blueDiamond > 0) {\r\n            this.lanzuan.value = \"+\" + this.sysHero.blueDiamond;\r\n            this.addChild(this.lanBox);\r\n            this.lanBox.x = 353;\r\n            this.lanBox.y = this.hh;\r\n            this.hh += 100;\r\n            this.lanBox.visible = true;\r\n            this.lanBox.scale(2.5, 2.5);\r\n            this.lanBox.alpha = 0;\r\n            Laya.Tween.to(this.lanBox, { scaleX: 1, scaleY: 1, alpha: 1 }, this.delayTime, null, new Laya.Handler(this, this.onNext3));\r\n        }\r\n        else {\r\n            this.onNext3();\r\n        }\r\n    }\r\n    onNext3() {\r\n        if (this.sysHero.redDiamond > 0) {\r\n            this.hongzuan.value = \"+\" + this.sysHero.redDiamond;\r\n            this.addChild(this.ziBox);\r\n            this.ziBox.x = 353;\r\n            this.ziBox.y = this.hh;\r\n            this.hh += 100;\r\n            this.ziBox.visible = true;\r\n            this.ziBox.scale(2.5, 2.5);\r\n            this.ziBox.alpha = 0;\r\n            Laya.Tween.to(this.ziBox, { scaleX: 1, scaleY: 1, alpha: 1 }, this.delayTime, null, new Laya.Handler(this, this.onNext4));\r\n        }\r\n        else {\r\n            this.onNext3();\r\n        }\r\n    }\r\n    onNext4() {\r\n        if (this.sysHero.gold > 0) {\r\n            this.coinClip.value = \"+\" + this.sysHero.gold;\r\n            this.deltaCoin.visible = false;\r\n            this.addChild(this.coinBox);\r\n            this.coinBox.x = 353;\r\n            this.coinBox.y = this.hh;\r\n            this.hh += 100;\r\n            this.coinBox.visible = true;\r\n            this.coinBox.scale(2.5, 2.5);\r\n            this.coinBox.alpha = 0;\r\n            Laya.Tween.to(this.coinBox, { scaleX: 1, scaleY: 1, alpha: 1 }, this.delayTime, null, new Laya.Handler(this, this.onNext5));\r\n        }\r\n        else {\r\n            this.onNext5();\r\n        }\r\n    }\r\n    onNext5() {\r\n        this.rebornBtn.y = this.hh + 30;\r\n        this.rebornBtn.visible = true;\r\n        this.rebornBtn.scale(2.5, 2.5);\r\n        this.rebornBtn.alpha = 0;\r\n        Laya.Tween.to(this.rebornBtn, { scaleX: 1, scaleY: 1, alpha: 1 }, this.delayTime, null, new Laya.Handler(this, this.onNext6));\r\n    }\r\n    onNext6() {\r\n        Laya.MouseManager.enabled = true;\r\n    }\r\n    onLoop() {\r\n        this.lightView.rotation++;\r\n    }\r\n}\r\n",
  "references": [
    "D:/gitworker/GirlGunGame/src/ui/layaMaxUI.ts",
    "D:/gitworker/GirlGunGame/src/main/Session.ts",
    "D:/gitworker/GirlGunGame/src/game/Game.ts",
    "D:/gitworker/GirlGunGame/src/main/sys/SysChapter.ts",
    "D:/gitworker/GirlGunGame/src/main/sys/SysHero.ts",
    "D:/gitworker/GirlGunGame/src/core/App.ts",
    "D:/gitworker/GirlGunGame/src/game/data/HomeData.ts",
    "D:/gitworker/GirlGunGame/src/main/GameEvent.ts"
  ]
}
